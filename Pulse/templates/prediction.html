{% extends "base.html" %}

  {% block styles %} 
    .album {
      background-color: white; 
    }
  {% endblock %}
  {% block jumbotron %}{% endblock %}
  {% block content %}
        <div class="row">
            <form method="get">
            <div class="col-md-6">
                <b>Select Datasource</b>
                <select class="form-control" name="datasource">
                <option value="coolan">CSV</option>
            </select>
            </div>
            <div class="col-md-6">
                <b>Select Dataset</b>
                <select class="form-control" name="dataset">
                <option value="server_power">Power Consuption</option>
            </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 col-md-offset-4"><button class="btn-success form-control" type="submit">Go !</button></div>
           
        </div>
        <div class="row">
            <div id="chart" style="min-width: 310px; height: 400px; margin: 0 auto">
                <div class="well t-well">
                    <div class="jumbotron">
                        <h3>Prediction</h3>      
                        <p>Retina Pulse uses powerful machine learning algorithms to learn and predict from the data it is provided with. </p>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/highcharts.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chart.js') }}"></script>
    <script>
        function loading(){

        if("{{ status }}"=="success"){
            $("#chart").html("<div class='loading'><center><img src=\"{{ url_for('static', filename='img/loading3.gif') }}\" style='\
position: relative;\
top: 130px;\
height: 60px;\
'></center></div>");
            setTimeout(function() {
                values = {{values |safe }};
                predictions = {{predictions |safe }};
                prediction(
                    title = "Power Consuption Real VS Prediction", 
                    subtitle = "",
                    series1_label = "Real",
                    series2_label = "Prediction",
                    series1_values = values,
                    series2_values = predictions,
                    x_axis_label = "Time",
                    y_axis_label = "Power Consumption" ,
                    x_axis_metric = "",
                    y_axis_metric = "Kilowatts"
                )
                    
                 //   values = values, predictions, "Power Consumption", "Real VS Prediction", "Actual", "Real","Power Consuption", "KW", "Time", "");
            }, 5000);
        }
    }
        loading();
    </script>
{% endblock scripts %}